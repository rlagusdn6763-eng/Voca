<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>오늘의 회화 영단어</title>
  <style>
    :root{
      --appbar-h: 64px;
      --brand: linear-gradient(90deg,#1565d8,#1e88e5);
      --bg: #f6f8fb;
      --card: #ffffff;
      --text: #0f172a;
      --muted: #64748b;
      --primary: #2563eb;
      --danger: #e11d48;
      --radius: 14px;
      --shadow: 0 8px 30px rgba(2,12,27,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans KR", Apple SD Gothic Neo, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
      color:var(--text);
      background:var(--bg);
      padding-top:var(--appbar-h);
    }

    /* AppBar */
    .appbar{
      position:fixed; inset:0 0 auto 0; height:var(--appbar-h);
      background:var(--brand); color:#fff; z-index:1000;
      display:flex; align-items:center; justify-content:center;
      box-shadow:0 2px 10px rgba(0,0,0,.06);
    }
    .appbar__inner{
      width:min(100%, 1000px);
      display:flex; align-items:center; justify-content:space-between;
      padding:0 14px;
    }
    .appbar__title{
      font-size:20px; font-weight:800; letter-spacing:.2px;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .appbar__actions{display:flex; align-items:center; gap:8px}
    .icon-btn{
      width:44px; height:44px; display:grid; place-items:center;
      border-radius:12px; background:rgba(255,255,255,.14);
      color:#fff; border:none; outline:none; cursor:pointer;
    }
    .icon-btn:active{transform:scale(.98)}

    /* Page container */
    .container{
      width:min(100%, 960px);
      margin:16px auto 60px;
      padding:0 14px;
    }

    /* Controls row */
    .row{display:flex; align-items:center; gap:10px; flex-wrap:wrap}
    .pill{
      height:48px; padding:0 16px; background:#fff; border-radius:999px;
      border:1px solid #e6eaf2; display:flex; align-items:center; gap:10px;
      box-shadow:var(--shadow);
    }
    .date-box{
      flex:1 1 260px; justify-content:center; min-width:240px;
      font-weight:700; font-size:20px; letter-spacing:.3px;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .sq-btn{
      height:48px; min-width:48px; padding:0 18px; border-radius:14px;
      border:1px solid #e6eaf2; background:#fff; cursor:pointer;
      font-weight:700; box-shadow:var(--shadow);
    }
    .sq-btn--green{ background:#10b981; color:#fff; border-color:#10b981 }
    .sq-btn--red{ background:var(--danger); color:#fff; border-color:var(--danger) }
    .sq-btn--ghost{ background:#fff }
    .sq-btn:active{ transform:translateY(1px) }

    .section{margin-top:14px}
    .card{
      background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow);
      padding:14px;
    }

    /* Words list placeholder area */
    #wordsContainer .item{
      border:1px solid #edf0f5; border-radius:14px; padding:14px;
      display:grid; grid-template-columns:auto 1fr auto; gap:12px;
      background:#fff;
    }

    /* Drawer (Account) */
    .backdrop{
      position:fixed; inset:0; background:rgba(15,23,42,.4);
      opacity:0; visibility:hidden; transition:.2s ease; z-index:2000;
    }
    .backdrop.show{opacity:1; visibility:visible}
    .drawer{
      position:fixed; inset:0 auto 0 0; width:min(90vw, 440px);
      background:#fff; transform:translateX(-100%);
      transition:transform .25s ease; z-index:2001; overflow:auto;
      padding-bottom:40px;
    }
    .drawer.show{ transform:translateX(0) }
    .drawer__head{
      position:sticky; top:0; background:#fff; padding:16px 18px;
      display:flex; align-items:center; justify-content:space-between;
      border-bottom:1px solid #eef2f7; z-index:1;
    }
    .drawer__title{font-size:22px; font-weight:800}
    .drawer__section{padding:18px}
    .chip{display:inline-flex; align-items:center; gap:8px; background:#eef2ff; color:#1e3a8a; padding:8px 10px; border-radius:999px; font-weight:700}
    .danger{color:#fff; background:var(--danger)}
    .muted{color:var(--muted)}
    .mt8{margin-top:8px} .mt12{margin-top:12px} .mt16{margin-top:16px}
    .grid2{display:grid; grid-template-columns:1fr 1fr; gap:10px}

    /* Mobile tweaks */
    @media (max-width:480px){
      .date-box{ font-size:18px; min-width:200px }
      .sq-btn{ padding:0 14px }
    }
  </style>
</head>
<body>

  <!-- AppBar -->
  <header class="appbar" role="banner" aria-label="상단바">
    <div class="appbar__inner">
      <div class="appbar__title">오늘의 회화 영단어</div>
      <div class="appbar__actions">
        <!-- 학습하기로 이동 -->
        <a href="study.html" aria-label="학습하기 페이지" class="icon-btn" title="학습하기">
          ▶
        </a>
        <!-- 계정/설정 메뉴 -->
        <button id="menuBtn" class="icon-btn" aria-haspopup="dialog" aria-controls="accountDrawer" aria-expanded="false" title="계정">
          ⋮
        </button>
      </div>
    </div>
  </header>

  <main class="container" id="mainContent">
    <!-- 날짜/재생 컨트롤 -->
    <section class="row">
      <button id="datePrevBtn" class="sq-btn" aria-label="이전 날짜">◀</button>
      <div id="dateDisplay" class="pill date-box" role="status" aria-live="polite">YYYY-MM-DD</div>
      <button id="dateNextBtn" class="sq-btn" aria-label="다음 날짜">▶</button>
    </section>

    <section class="row section">
      <button id="playAllBtn" class="sq-btn">전체 재생</button>
      <button id="stopBtn" class="sq-btn sq-btn--ghost">정지</button>
      <button id="completeBtn" class="sq-btn sq-btn--green">오늘분 완료</button>
      <button id="todayBtn" class="sq-btn">오늘의 단어</button>
    </section>

    <section class="row section">
      <button id="hardBtn" class="sq-btn">★ 어려운 단어</button>
      <button id="logBtn" class="sq-btn">기록</button>
      <button id="deleteLogBtn" class="sq-btn sq-btn--red">기록 삭제</button>
    </section>

    <section class="row section card" style="gap:14px; align-items:center">
      <div style="display:flex; align-items:center; gap:10px; flex:1">
        <div class="muted">속도</div>
        <input id="speedRange" type="range" min="0.6" max="1.4" step="0.05" value="1.0" style="flex:1" />
      </div>
      <select id="voiceSelectEn" class="sq-btn" aria-label="영어 음성">
        <option>영어 음성</option>
      </select>
      <select id="voiceSelectKo" class="sq-btn" aria-label="한국어 음성">
        <option>한국어 음성</option>
      </select>
    </section>

    <!-- 단어 리스트 -->
    <section class="section">
      <div id="wordsContainer" class="card" aria-live="polite">
        <div class="muted">여기에 단어 리스트 / 날짜 선택 등이 들어갑니다…</div>
      </div>
    </section>
  </main>

  <!-- Drawer Backdrop -->
  <div id="drawerBackdrop" class="backdrop" tabindex="-1" aria-hidden="true"></div>

  <!-- Account Drawer -->
  <aside id="accountDrawer" class="drawer" role="dialog" aria-modal="true" aria-label="계정 패널" aria-hidden="true">
    <div class="drawer__head">
      <div class="drawer__title">계정</div>
      <button id="drawerCloseBtn" class="icon-btn" aria-label="닫기">✕</button>
    </div>

    <div class="drawer__section">
      <!-- 로그인 전 -->
      <div id="drawerLoggedOut" style="display:none">
        <div class="muted">이메일로 로그인</div>
        <div class="mt8 grid2">
          <input id="emailInput" class="pill" placeholder="you@example.com" inputmode="email" />
          <input id="passwordInput" class="pill" placeholder="8자리 이상" type="password" />
        </div>
        <div class="mt12 grid2">
          <button id="loginBtn" class="sq-btn sq-btn--green">로그인</button>
          <button id="signupOpenBtn" class="sq-btn">회원가입</button>
        </div>
        <div class="mt12">
          <button id="googleLoginBtn" class="sq-btn" style="width:100%">Google로 로그인</button>
        </div>
        <div class="mt12 muted">로그인하지 않음</div>
      </div>

      <!-- 로그인 후 -->
      <div id="drawerLoggedIn" style="display:none">
        <div class="chip">로그인됨</div>
        <div class="mt12 card" style="padding:12px">
          <div><strong>이메일</strong> <span id="profileEmail" class="mt8"></span></div>
          <div class="mt8"><strong>닉네임</strong> <span id="profileNickname" class="mt8"></span></div>
        </div>
        <div class="mt12 grid2">
          <button id="openProfileEditBtn" class="sq-btn">정보 수정</button>
          <button id="logoutBtn" class="sq-btn danger">로그아웃</button>
        </div>
      </div>
    </div>
  </aside>

  <!-- ===== Drawer/헤더만을 위한 최소 스크립트 (나머지 기존 로직과 충돌 없음) ===== -->
  <script>
    (function(){
      const menuBtn = document.getElementById('menuBtn');
      const drawer = document.getElementById('accountDrawer');
      const backdrop = document.getElementById('drawerBackdrop');
      const closeBtn = document.getElementById('drawerCloseBtn');

      const openDrawer = () => {
        drawer.classList.add('show');
        drawer.setAttribute('aria-hidden', 'false');
        backdrop.classList.add('show');
        backdrop.setAttribute('aria-hidden','false');
        menuBtn.setAttribute('aria-expanded','true');
        // 포커스 트랩 시작 지점
        setTimeout(()=> drawer.focus?.(), 0);
      };
      const closeDrawer = () => {
        drawer.classList.remove('show');
        drawer.setAttribute('aria-hidden', 'true');
        backdrop.classList.remove('show');
        backdrop.setAttribute('aria-hidden','true');
        menuBtn.setAttribute('aria-expanded','false');
        menuBtn.focus();
      };

      menuBtn.addEventListener('click', openDrawer);
      backdrop.addEventListener('click', closeDrawer);
      closeBtn.addEventListener('click', closeDrawer);
      window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeDrawer(); });

      // 페이지 진입 시 헤더 높이 보정(혹시 스타일이 바뀌어도 안전)
      const appbar = document.querySelector('.appbar');
      const syncPadding = () => {
        const h = appbar.getBoundingClientRect().height || 64;
        document.body.style.paddingTop = h + 'px';
      };
      syncPadding();
      window.addEventListener('resize', syncPadding);
    })();
  </script>

  <!-- ====== 여기에 기존 앱 로직 스크립트들을 그대로 두세요 ====== -->
  <!-- 예: Firebase 초기화 / 음성재생 / 단어 로딩 / 기록 등 -->
  <!-- <script src="firebase-init.js"></script> -->
  <!-- <script src="index-logic.js"></script> -->
</body>
</html>
